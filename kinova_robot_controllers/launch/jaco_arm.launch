<launch>
    <node   name="jaco_arm"
             pkg="kinova_ros_ctrl"
            type="kinova_node"
          output="screen"
    >
        <rosparam>
            period: 0.01    # 100 Hz
            w_skip:   1    # Write cycle of 10 Hz
        </rosparam>
    </node>

    <include file="$(find kinova_description)/launch/upload_jaco2.launch"/>

    <rosparam>
        force_torque_sensor_controller:
            type: force_torque_sensor_controller/ForceTorqueSensorController
            publish_rate: 100
        joint_state_controller:
            type:         joint_state_controller/JointStateController
            publish_rate: 100
        # Joint Trajectory Controller:
        jaco_controller:
            type: position_controllers/JointTrajectoryController
            joints:
                - jaco2_joint_1
                - jaco2_joint_2
                - jaco2_joint_3
                - jaco2_joint_4
                - jaco2_joint_5
                - jaco2_joint_6
            constraints:
                goal_time: 0.01  # Unusually high
                jaco2_joint_1:
                    trajectory: 0.50
                    goal:       0.1
                jaco2_joint_2:
                    trajectory: 0.50
                    goal:       0.1
                jaco2_joint_3:
                    trajectory: 0.50
                    goal:       0.1
                jaco2_joint_4:
                    trajectory: 0.50
                    goal:       0.1
                jaco2_joint_5:
                    trajectory: 0.50
                    goal:       0.1
                jaco2_joint_6:
                    trajectory: 0.50
                    goal:       0.1
        # TODO: Gripper controller for the fingers
    </rosparam>
    
    <!-- NOTE: The spawner hangs when the full launch file is killed, but the
               controller manager is stopped correctly. -->
    <node   name="controller_spawner"
             pkg="controller_manager"
            type="spawner"
          output="screen"
            args="joint_state_controller jaco_controller force_torque_sensor_controller"
    />

    <node name="robot_state_publisher"
           pkg="robot_state_publisher"
          type="robot_state_publisher"
    />

</launch>

